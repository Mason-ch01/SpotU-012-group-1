<h1 style="color:white">Posts</h1>
<div class="container d-flex justify-content-center flex-wrap">
    {{#if posts.length}}
        <ul>
            {{#each posts}}
                <div class="col-md-4 mb-4">

                    <div class="card h-100 d-flex flex-column" style="background-color: rgba(255,255,255,0.13); width: 600px;">
                        
                        <div class="card-body d-flex flex-column">
                            <!-- Author Username -->
                            <h5 class="card-title" style="color: white;">
                                <strong>{{this.authorusername}}</strong>
                            </h5>

                            <div class="d-flex align-items-start">
                                <!-- Song Image -->
                                {{#if songimage}}
                                    <img src="{{this.songimage}}" alt="song-image" class="card-img"/>
                                {{/if}}

                                <div style="text-align: left;">
                                    <!-- Song Name, Artist, and Link -->
                                    {{#if songname}}
                                    <p class="card-text" style="color: white;">
                                        <strong style="font-size: 24px; margin-left: 8px">
                                            {{this.songname}}
                                        </strong>  
                                        <p style="color:white; text-align: left; margin-left: 16px; line-height: 0.8;">
                                            {{this.songartist}}
                                        </p>
                                        <a href="{{this.songlink}}" style="margin-left: 8px; line-height: 0.8;">
                                            Listen Here
                                        </a> 
                                    </p>
                                    {{/if}}

                                    {{#if playlistname}}
                                        <p class="card-text" style="color: white;">
                                            <strong>Playlist Name:</strong> {{this.playlistname}} <br>
                                        </p>
                                    {{/if}}
                                </div>
                            </div>

                            <div class="d-flex justify-content-center align-items-center position-relative">
                                <!-- Comment Section -->
                                <div class="comment-section-container">
                                    <input type="checkbox" id="toggle-comments-{{this.postid}}" class="toggle-checkbox">
                                    <label for="toggle-comments-{{this.postid}}" class="comment-toggle-button">Comments</label>
                                    
                                    <div class="comment-section">
                                        <form method="POST" action="/new_comment">
                                           <input type="hidden" name="postId" value="{{this.postid}}">
                                            <textarea name="comment" placeholder="Add a comment..." class="comment-input"></textarea>
                                            <button type="submit" class="submit-comment-button">Post Comment</button>
                                        </form>
                                        {{#if this.comments}}
                                            <ul>
                                                {{#each this.comments}}
                                                    <li style="color: white">{{this.comment}} - {{this.commentAuthor}}</li>
                                                {{/each}}
                                            </ul>
                                        {{else}}
                                            <div class="comments-list">
                                                <p>No comments yet.</p>
                                            </div>
                                        {{/if}}
                                    </div>
                                </div>

                                <!-- Like Button (maybe)
                                <div class="like-button-container" style="position: absolute; top: 10px; right: 20px;">
                                    <input type="checkbox" id="like-toggle" class="like-checkbox">
                                    <label for="like-toggle" class="like-button">Like</label>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </ul>
    {{else}}
        <p>No posts from your followers yet.</p>
    {{/if}}
</div>
