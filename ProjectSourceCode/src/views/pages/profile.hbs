<div class="container text-center mt-5 mb-2">
    <div class="row">
        <!-- Profile image and username -->
        <div class="col-md-4">
            <img src="../../../resources/profilePhotos/{{#if user_info.profile_photo}}{{user_info.profile_photo}}{{else}}default.png{{/if}}" alt="Profile Image" class="profile-img">
            <br>
            <h2 id="username" style="color: white">{{user_info.username}}</h2>
        </div>

        <!-- Following and Followers count -->
        <div class="col-md-4">
            <div class="black-box">
                Followed: {{user_info.following_count}}
            </div>
        </div>

        {{#if currentUser}}
        <!-- Follow button for the current user -->
        <div class="col-md-4">
            <button type="button" id="follow" class="btn follower">Follow</button>
        </div>
        {{/if}}

        <div class="col-md-4">
            <div class="black-box">
                Followers: {{user_info.follower_count}}
            </div>
        </div>
    </div>

    <!-- Update Profile Picture button under username -->
    <div class="row">
        <div class="col-md-4 offset-md-4 text-center mt-3">
            <button id="updatepfpbutton" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#exampleModal">Update PFP</button>
        </div>
    </div>
</div>

<!-- Modal for updating profile photo -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Update PFP</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <select class="form-select" id="image" required onchange="updateProfilePhoto()">
                    <option value="default.png" default>Default</option>
                    <option value="dragon.jpg">Dragon</option>
                    <option value="monkey.jpg">Monkey</option>
                    <option value="panda.jpg">Pandy</option>
                    <option value="skull.jpg">Skull</option>
                    <option value="smiley.jpg">Smiley</option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="pfp" onclick="saveProfilePhoto(pfp)" data-bs-dismiss="modal">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Posts Section -->
<div class="container d-flex justify-content-center flex-wrap">
    {{#if posts.length}}
    <div class="row">
        {{!-- {{#each posts}}
        <div class="col-md-4 mb-4">
            <div class="card h-100" style="background-color: rgba(255,255,255,0.13);">
                <div class="card-body">
                    <h5 class="card-title" style="color: white;"><strong>{{this.authorusername}}</strong></h5>
                    {{#if songname}}
                    <p class="card-text" style="color: white;">
                        <strong>Song:</strong> {{this.songname}} <br>
                        <a href="{{this.songlink}}">Listen Here</a> <br>
                    </p>
                    {{/if}}
                    {{#if playlistname}}
                    <p class="card-text" style="color: white;">
                        <strong>Playlist Name:</strong> {{this.playlistname}} <br>
                    </p>
                    {{/if}}
                    <p style="color: white"><strong>Likes:</strong> {{this.likes}}</p>
                </div>
            </div>
        </div>
        {{/each}} --}}
        {{#each posts}}
            <div class="col-md-4">
                <div class="card" style="width: auto; height: 15cm;">
                    <img src="{{this.albumimageurl}}" class="card-img-top" alt="{{this.songname}}">
                    <div class="card-body">
                        <h5 class="card-title" style="background-color: transparent">{{this.songname}}</h5>
                        <br>
                        <a href={{this.songuri}}>
                            <button type="button" class="btn btn-light">Listen Here</button>
                        </a>
                    </div>
                </div>
            </div>
        {{/each}}
    </div>
    {{else}}
    <p>You haven't posted yet</p>
    {{/if}}
</div>

